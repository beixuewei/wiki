http://wenshu.court.gov.cn/website/wenshu/181107ANFZ0BXSK4/index.html?docId=63fa0661df014915a941a7ae0010e97b
http://wenshu.court.gov.cn/website/wenshu/181107ANFZ0BXSK4/index.html?docId=2081a9f39107443cb831a84d00a58bab
不合法，但用人单位的损失部分属于合理赔偿

http://wenshu.court.gov.cn/website/wenshu/181107ANFZ0BXSK4/index.html?docId=721ecdc37a0c4efb9a1c913a1510030b
用人单位如果主张违约金会被判无效

综合来说，
劳动者应主张违约金无效，并结合岗位工资、工作年限等，说明已弥补用人单位损失，或者已与用人单位达成和解。
用人单位应主张劳动者离职给单位造成了损失，并提供事实依据。
